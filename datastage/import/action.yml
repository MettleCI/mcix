# action.yml

# ███╗   ███╗███████╗████████╗████████╗██╗     ███████╗ ██████╗██╗
# ████╗ ████║██╔════╝╚══██╔══╝╚══██╔══╝██║     ██╔════╝██╔════╝██║
# ██╔████╔██║█████╗     ██║      ██║   ██║     █████╗  ██║     ██║
# ██║╚██╔╝██║██╔══╝     ██║      ██║   ██║     ██╔══╝  ██║     ██║
# ██║ ╚═╝ ██║███████╗   ██║      ██║   ███████╗███████╗╚██████╗██║
# ╚═╝     ╚═╝╚══════╝   ╚═╝      ╚═╝   ╚══════╝╚══════╝ ╚═════╝╚═╝
# MettleCI DevOps for DataStage       (C) 2025-2026 Data Migrators
#      _       _            _
#   __| | __ _| |_ __ _ ___| |_ __ _  __ _  ___
#  / _` |/ _` | __/ _` / __| __/ _` |/ _` |/ _ \
# | (_| | (_| | || (_| \__ \ || (_| | (_| |  __/
#  \__,_|\__,_|\__\__,_|___/\__\__,_|\__, |\___|
#  _                            _     |___/
# (_)_ __ ___  _ __   ___  _ __| |_
# | | '_ ` _ \| '_ \ / _ \| '__| __|
# | | | | | | | |_) | (_) | |  | |_
# |_|_| |_| |_| .__/ \___/|_|   \__|
#             |_|

name: 'MCIX datastage import action'
author: 'Data Migrators Pty Ltd'
description: 'Runs mcix datastage import'
branding:
  icon: 'zap'
  color: 'blue'

# Note that true/false boolean inputs accept:
# 1, true, TRUE, yes, YES, on, ON, and 
# 0, false, FALSE, no, NO, off, OFF
inputs:

  api-key:
    description: 'API key for authentication'
    required: true

  url:
    description: 'URL of the DataStage server'
    required: true

  user:
    description: 'Username for authentication'
    required: true

  assets:
    description: 'Path to the DataStage assets to import'
    required: false
    default: ""

  project:
    description: 'DataStage project name'
    required: false     # Required when -project-id not specified
    default: ""

  project-id:
    description: 'DataStage project id'
    required: false     # Required when -project not specified
    default: ""

outputs:
  return-code:
    description: 'The return code of the command'

runs:
  using: docker
  image: Dockerfile
  env:
    PARAM_API_KEY: ${{ inputs.api-key }}
    PARAM_URL: ${{ inputs.url }}
    PARAM_USER: ${{ inputs.user }}
    PARAM_ASSETS: ${{ inputs.assets }}
    PARAM_PROJECT: ${{ inputs.project }}
    PARAM_PROJECT_ID: ${{ inputs.project-id }}
