# MCIX DataStage Unit Test Execute GitHub Action

Run DataStage unit tests managed by MCIX as part of CI/CD.

> Namespace: `unit-test`
> Action: `execute`
> Usage: `DataMigrators/mcix/unit-test/execute@v1`

## ğŸš€ Usage

```yaml
- uses: DataMigrators/mcix/unit-test/execute@v1
  with:
    api-key: ${{ secrets.MCIX_API_KEY }}
    url: https://your-mcix-server/api
    user: dm-automation
    report: unit-tests
    project: GitHub_CP4D_DevOps
```

## ğŸ”§ Inputs

| Name                   | Required | Description |
|------------------------|----------|-------------|
| api-key                | Yes      | MCIX API key |
| url                    | Yes      | MCIX URL |
| user                   | Yes      | Logical user |
| report                 | Yes      | Report/mode |
| project                | Conditional | Project name |
| project-id             | Conditional | Project ID |
| max-concurrency        | Optional | Concurrency level |
| included-tags          | Optional | Include tags |
| excluded-tags          | Optional | Exclude tags |
| test-suite             | Optional | Suite name |
| ignore-test-failures   | Optional | Bool |

## ğŸ“¤ Outputs

| Name | Description |
|------|-------------|
| return-code | Exit code |

## ğŸ“š More information

See https://nextgen.mettleci.io/mettleci-cli/unit-test-namespace/#unit-test-execute

<!-- BEGIN MCIX-ACTION-DOCS -->
# mcix unit-test execute action

Runs mcix unit-test execute

> Namespace: `unit-test`<br>
> Action: `execute`<br>
> Usage: `${{ github.repository }}/unit-test/execute@v1`

... where `v1` is the version of the action you wish to use.

---

## ğŸš€ Usage

Minimal example:

```yaml
jobs:
  unit-test-execute:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout repository
        uses: actions/checkout@v4

      - name: Run mcix unit-test execute action
        id: unit-test-execute
        uses: ${{ github.repository }}/unit-test/execute@v1
        with:
          api-key: <required>
          url: <required>
          user: <required>
          report: <required>
          # project: <optional>
          # project-id: <optional>
          # ignore-test-failures: false
          # max-concurrency: 8
          # test-suite: mcix tests
```

---

### Project selection rules

- Provide **exactly one** of `project` or `project-id`.
- If both are supplied, the action should fail fast (ambiguous).

---

## ğŸ”§ Inputs

| Name | Required | Default | Description |
| --- | --- | --- | --- |
| `api-key` | âœ… |  | API key for authentication |
| `url` | âœ… |  | URL of the DataStage server |
| `user` | âœ… |  | Username for authentication |
| `project` | âŒ |  | DataStage project name |
| `project-id` | âŒ |  | DataStage project id |
| `report` | âœ… | ./test-report.xml | Path to output the compile report |
| `ignore-test-failures` | âŒ | false (if omitted) | Ignore test failures (always return 0)? (true/false) |
| `max-concurrency` | âŒ | 8 | Maximum number of concurrently executing test case jobs to run |
| `test-suite` | âŒ | mcix tests | The test suite name for this invocation of unit testing |

---

## ğŸ“¤ Outputs

| Name | Description |
| --- | --- |
| `return-code` | The return code of the command |
| `junit-path` | Path to the JUnit XML report generated by mcix unit-test execute |

---

## ğŸ§± Implementation details

- `runs.using`: `docker`
- `runs.image`: `Dockerfile`

---

## ğŸ§© Notes

- The sections above are auto-generated from `action.yml`.
- To edit this documentation, update `action.yml` (name/description/inputs/outputs).
<!-- END MCIX-ACTION-DOCS -->
